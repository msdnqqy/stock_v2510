"""
事件抽取-deep research 版
1、判断是什么类型的新闻
2、判断使用哪个模型进行事件抽取（动态生成抽取模板）
"""

from event_summary_config_v3 import *
from llm_utils import *
from config import *
from test_data import *


input="""
Price	Date	Close	High	Low	Open	Volume	MA5	MA20	MA60
0	2025-11-28	20.320000	20.360001	19.950001	20.059999	42242601	20.456	20.9685	21.499267
1	2025-12-01	20.120001	20.379999	19.959999	20.379999	66326195	20.378	20.8805	21.488816
2	2025-12-02	20.160000	20.260000	19.990000	20.110001	50792825	20.322	20.8030	21.476894
3	2025-12-03	20.400000	20.639999	20.100000	20.230000	63343064	20.226	20.7320	21.472426
4	2025-12-04	20.969999	20.990000	20.340000	20.410000	83791248	20.394	20.6810	21.479923
5	2025-12-05	21.299999	21.350000	20.900000	20.940001	81925980	20.590	20.6395	21.501635
6	2025-12-08	21.230000	21.629999	21.030001	21.430000	65289833	20.812	20.6445	21.515604
7	2025-12-09	21.180000	21.430000	21.040001	21.150000	41468064	21.016	20.6580	21.524628
8	2025-12-10	21.469999	21.549999	21.030001	21.170000	51653148	21.230	20.6990	21.532567
9	2025-12-11	21.090000	21.610001	21.030001	21.450001	50144032	21.254	20.7090	21.536310
10	2025-12-12	21.320000	21.389999	21.090000	21.190001	53330151	21.258	20.7420	21.542900
11	2025-12-15	21.070000	21.570000	21.059999	21.309999	44677139	21.226	20.7670	21.546802
12	2025-12-16	20.760000	21.040001	20.620001	21.040001	42009714	21.142	20.7620	21.553102
13	2025-12-17	21.070000	21.190001	20.629999	20.790001	48258808	21.062	20.7770	21.564733
14	2025-12-18	21.000000	21.180000	20.700001	20.900000	38853047	21.044	20.7840	21.569935
15	2025-12-19	21.240000	21.500000	20.950001	20.990000	52237337	21.028	20.8330	21.582097
16	2025-12-22	20.889999	21.379999	20.860001	21.299999	58059980	20.992	20.8520	21.570339
17	2025-12-23	20.680000	20.930000	20.440001	20.850000	52012927	20.976	20.8640	21.560179
18	2025-12-24	20.799999	20.900000	20.559999	20.690001	31632194	20.922	20.8600	21.551196
19	2025-12-25	20.670000	20.860001	20.620001	20.799999	32538096	20.856	20.8870	21.529852

解释这段k线的走势
                        """

if __name__ == "__main__":
    # 测试模型
    # test_prompt = """某半导体公司宣布研发出 2nm 制程芯片，良率达到 90%，预计明年量产。"""
    test_prompt = news_list[-1]
    # extract_result = chat_stream(PROMPT.replace('[输入文本]', test_prompt))
    extract_result = chat_stream(input)
    print("finnal result:\t",extract_result)

